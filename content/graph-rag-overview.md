---
title: Graph RAG Overview
tags: [rag, graph-rag, overview, knowledge-graph, information-retrieval, global-queries, ai]
description: Comprehensive overview of Graph RAG explaining how it extends traditional RAG with graph-based knowledge.
markmap:
  colorFreezeLevel: 2
  maxWidth: 300
---
# Graph RAG Approach to Query-Focused Summarization

## Introduction
- **Human sensemaking** over large document collections requires understanding connections to anticipate trajectories.
- **RAG** is designed for local answers, while **QFS** is better for global questions.
- **Challenge**: Query-focused abstractive summarization over an entire corpus exceeds LLM context windows.

## Graph RAG Approach & Pipeline
- **Overview**: Uses an LLM to build a graph-based text index.
- **Two-stage process**:
  - Derive an entity knowledge graph from source documents.
  - Pre-generate community summaries for related entities.
- **Query Process**:
  - Generate partial responses from each community summary.
  - Summarize partial responses into a final global answer.

### Pipeline Stages
#### Source Documents → Text Chunks:
- Split input texts into chunks.
- Longer chunks require fewer LLM calls but suffer from recall degradation.

#### Text Chunks → Element Instances:
- Identify graph nodes and edges from each text chunk.
- Extract entities, relationships, and covariates using LLM prompts.
- Use multiple rounds of "gleanings" to detect missed entities.

#### Element Instances → Element Summaries:
- Summarize extracted descriptions of entities, relationships, and claims.
- Convert instance-level summaries into descriptive text for each graph element.
- Resilient to variations in entity references due to community detection.

#### Element Summaries → Graph Communities:
- Model the index as a weighted, undirected graph.
- Partition the graph into communities using algorithms like Leiden.
- Leiden recovers hierarchical community structures.

#### Graph Communities → Community Summaries:
- Create report-like summaries of each community.
- Leaf-level summaries prioritize element summaries.
- Higher-level summaries substitute sub-community summaries for element summaries.

#### Community Summaries → Community Answers → Global Answer:
- Use community summaries to generate final answers.
- Prepare community summaries, generate intermediate answers, and reduce to a global answer.

## Evaluation
- **Datasets**: Podcast transcripts and news articles.
- **Queries**: Activity-centered questions generated by LLM.
- **Conditions**: Graph RAG with different levels of community summaries (C0-C3), text summarization (TS), and naive RAG (SS).
- **Metrics**:
  - Comprehensiveness, diversity, empowerment, and directness.
  - Head-to-head comparisons using an LLM evaluator.
- **Results**:
  - Global approaches outperform naı̈ve RAG on comprehensiveness and diversity.
  - Graph RAG with intermediate and low-level summaries performs better than source text summarization.
  - Root-level summaries are efficient for iterative question answering.
  - Empowerment showed mixed results.
- **Configuration**: 8k context window was optimal.
- **Graph Index**:
  - Podcast Dataset: 8564 nodes and 20691 edges.
  - News Dataset: 15754 nodes and 19520 edges.
- **Community Summaries vs. Source Texts**:
  - Community summaries generally improve answer comprehensiveness and diversity.
  - Graph RAG is more scalable and uses less context tokens.

## Related Work
- **RAG**:
  - Naïve RAG converts documents to text, splits text into chunks and uses embedding vectors to identify most relevant chunks.
  - Advanced RAG systems include pre-retrieval, retrieval and post-retrieval strategies.
  - Modular RAG systems use iterative and dynamic cycles of interleaved retrieval and generation.
- **Graphs and LLMs**:
  - Use LLMs for knowledge graph creation and completion.
  - Use of graphs for RAG is a developing research area.

## Discussion
- **Limitations**: Evaluation on specific questions and dataset sizes.
- **Trade-offs**: Decision to build graph index depends on various factors.
- **Future Work**: Refinements, adaptations, and hybrid RAG schemes.

## Conclusion
- **Graph RAG**: Combines knowledge graph generation, RAG, and QFS for sensemaking.
- **Results**: Improved comprehensiveness and diversity over naı̈ve RAG.
- **Efficiency**: Root-level summaries offer efficiency at lower token cost.